# Master Coding Standards - Quick Reference

## ğŸš¨ CRITICAL RULES (Always Follow)
1. **ALWAYS make routes READ-ONLY by default** unless write operations are explicitly needed
2. **NEVER leak sensitive keys, API tokens, or database credentials** in client-side code
3. **Prefer server components and server actions** for all data operations
4. **Follow the exact feature folder structure** for every feature

## ğŸ“ Feature Folder Structure (MANDATORY)
```
feature-name/
â”œâ”€â”€ page.tsx          # Main page (server component)
â”œâ”€â”€ components/       # UI components for this feature
â”œâ”€â”€ service.ts        # All data fetching logic
â”œâ”€â”€ hook.ts           # All component logic
â”œâ”€â”€ actions.ts        # Server actions (if needed)
â”œâ”€â”€ loading.tsx       # Loading state (if needed)
â”œâ”€â”€ error.tsx         # Error boundary (if needed)
â””â”€â”€ types.ts          # TypeScript types
```

## ğŸ—ï¸ Architecture Principles
- **Server-First**: Default to server components, only use client components when necessary
- **Feature Isolation**: Each feature is completely self-contained
- **Common Separation**: Common utilities go in `@/lib/`, common components go in `@/components/ui/`
- **Data Flow**: Server Component â†’ Service â†’ Database â†’ Render â†’ Client Component (if needed)

## ğŸ”’ Security Requirements
- Use environment variables for ALL sensitive configuration
- Never hardcode API keys or secrets
- Implement proper authentication in server components
- Use middleware for route protection

## ğŸ“ Code Patterns

### Server Component (Default)
```typescript
// page.tsx
export default async function Page() {
  const data = await getData() // from service.ts
  return <Component data={data} />
}
```

### Client Component (Only when needed)
```typescript
'use client'
import { useFeatureLogic } from '../hook'

export function InteractiveComponent() {
  const { state, handlers } = useFeatureLogic()
  return <div>{/* JSX */}</div>
}
```

### Service Layer
```typescript
// service.ts
export async function getData() {
  // Database queries, API calls
  return await db.query(/* ... */)
}
```

### Hook Layer
```typescript
// hook.ts
export function useFeatureLogic() {
  // Component logic, state management
  return { state, handlers }
}
```

### Server Actions
```typescript
// actions.ts
'use server'
export async function updateData(formData: FormData) {
  // Validation, processing, database updates
  revalidatePath('/path')
}
```

## ğŸš« What NOT to Do
- âŒ Put feature logic in common folders
- âŒ Put common logic in feature folders
- âŒ Use client components for data fetching
- âŒ Hardcode sensitive information
- âŒ Mix concerns between layers
- âŒ Skip the required folder structure

## âœ… What ALWAYS to Do
- âœ… Use server components by default
- âœ… Follow the exact feature folder structure
- âœ… Use environment variables for secrets
- âœ… Keep features isolated
- âœ… Use services for data operations
- âœ… Use hooks for component logic

description: Master reference for all coding standards and best practices
globs: ["**/*.tsx", "**/*.ts", "**/*.jsx", "**/*.js"]
alwaysApply: true
---
description:
globs:
alwaysApply: false
---
